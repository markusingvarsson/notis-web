<app-card
  [className]="
    'hover:shadow-md transition-shadow duration-200 ' +
    'cursor-pointer h-[220px] flex flex-col'
  "
>
  <app-card-header [className]="'px-4 pt-4 pb-2'">
    <div class="flex items-center w-full">
      <!-- Title container with strict width control -->
      <div class="min-w-0 flex-1 mr-2">
        <app-card-title
          [className]="'text-lg font-medium truncate leading-snug block'"
        >
          {{ note().title }}
        </app-card-title>
      </div>

      <!-- Fixed width button container -->
      <div class="flex items-center gap-1 flex-shrink-0">
        <app-button
          *ngIf="onDelete"
          [className]="'h-7 w-7 p-1 text-destructive hover:text-destructive'"
          variant="ghost"
          size="icon"
          (click)="onDelete($event)"
          aria-label="Delete note"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="3 6 5 6 21 6" />
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
            <path d="M10 11v6" />
            <path d="M14 11v6" />
            <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" />
          </svg>
        </app-button>
      </div>
    </div>

    <!-- Moved time label outside the flex for better spacing -->
    <p class="mt-2 text-xs text-muted-foreground">{{ timeAgo() }}</p>
  </app-card-header>

  <app-card-content [className]="'px-4 pt-2 pb-4 flex-1 overflow-hidden'">
    <p class="text-sm text-muted-foreground line-clamp-6">
      {{ preview() }}
    </p>
  </app-card-content>
</app-card>
