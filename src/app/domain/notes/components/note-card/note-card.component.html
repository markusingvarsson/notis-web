<app-card
  [className]="
    'hover:shadow-md transition-shadow duration-200 ' +
    'cursor-pointer h-[220px] flex flex-col'
  "
>
  <app-card-header [className]="'px-4 pt-4 pb-2'">
    <div class="flex items-center w-full">
      <!-- Title container with strict width control -->
      <div class="min-w-0 flex-1 mr-2">
        <app-card-title
          [className]="'text-lg font-medium truncate leading-snug block'"
        >
          {{ note().title }}
        </app-card-title>
      </div>

      <!-- Fixed width button container -->
      <div class="flex items-center gap-1 flex-shrink-0">
        <app-button
          [className]="'h-7 w-7 p-1 text-destructive hover:text-destructive'"
          variant="ghost"
          size="icon"
          (click)="onDelete($event)"
          aria-label="Delete note"
        >
          <app-trash-icon [size]="4" />
        </app-button>
      </div>
    </div>

    <!-- Moved time label outside the flex for better spacing -->
    <p class="mt-2 text-xs text-muted-foreground">{{ timeAgo() }}</p>
  </app-card-header>

  <app-card-content [className]="'px-4 pt-2 pb-4 flex-1 overflow-hidden'">
    <p class="text-sm text-muted-foreground line-clamp-6">
      {{ preview() }}
    </p>
  </app-card-content>
  @if (hasAudio()) {
  <app-card-footer>
    <audio #audioElement [src]="audioSrc()" controls preload="auto"></audio>
  </app-card-footer>
  }
</app-card>
